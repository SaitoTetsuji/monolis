
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MONOLITH</title>
</head>
<body>
    <!-- CDNの場合 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.js"></script>
    <div class="qrblock">
        <p class="qrcomment">QRコードで生成したい文字列を入力してください。</p>
        <input id="isbn" type="text" name="isbn" value=""> <button id="getqrInfo" class="btn btn-default">QRコードを生成</button><br>
        <input type="text">
    </div>
    <div id="qrOutput">
        <canvas id="qr"></canvas>
        <div><img id="newImg"></div>
    </div>
    <script>
        document.getElementById('getqrInfo').addEventListener('click', () => {
        // 入力された文字列を取得
        var userInput = document.getElementById('isbn').value;
        var query = userInput.split(' ').join('+');
        // QRコードの生成
        (function() {
        var qr = new QRious({
        element: document.getElementById('qr'),
        // 入力した文字列でQRコード生成
        value: query
        });
        qr.background = '#FFF'; //背景色
        qr.backgroundAlpha = 0.8; // 背景の透過率
        qr.foreground = '#6bb6ff'; //QRコード自体の色
        qr.foregroundAlpha = 1.0; //QRコード自体の透過率
        qr.level = 'L'; // QRコードの誤り訂正レベル
        qr.size = 240; // QRコードのサイズ
        // QRコードをflexboxで表示
        document.getElementById('qrOutput').style.display = 'flex';
        })();
        // png出力用コード
        //var cvs = document.getElementById("qr");
        var png = cvs.toDataURL();
        document.getElementById("newImg").src = png;

        });
    </script>
</body>
</html>