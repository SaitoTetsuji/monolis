<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MONOLIS</title>
    <!--スタイルシートの読み込み-->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" href="quill.css">
    <link rel="stylesheet" href="menu.css">
    <script src="https://monolis.f5.si/js/api_access.js"></script>
    <script>const api = new MonolisAPI("monolis.f5.si/api");</script>
</head>
<body>
     <!--「ヘッダー」　時々のファイル名を登録したい-->
     <header>
        <script>
          document.addEventListener("DOMContentLoaded", function() {
          const urlParams = new URLSearchParams(window.location.search);
          const filename = urlParams.get("filename");
  
          // ファイル名を表示
          const filenameElement = document.getElementById("filename");
          filenameElement.textContent = filename;
          });
        </script>
        <h1 class="title"> 
          <span id="filename"></span>
        </h1>
        <nav class="nav">
          <ul class="menu-group">
            <li class="menu-item"><a href="#">設定</a></li>
            <li class="menu-item"><a href="list.html">ものリスト</a></li>
          </ul>
        </nav>
    </header>
    
    <!--エディタコンテナの作成-->
    <div id="editor">
         <p><br></p>
    </div>
    
    <!--Quillライブラリの読み込み-->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
   
    <!--Quillエディタの初期化-->
    <script src="quill.js"></script>

     <!--管理画面スライドメニューのコード-->
     <div id="slide-menu">
        <h2>管理画面</h2>
        
        <p>公開範囲設定<br>
          <div>
            <input type="checkbox" id="checkbox1" onchange="updateCheckboxes(1)">
            <label for="checkbox1">公開</label>
          </div>
          <div>
            <input type="checkbox" id="checkbox2" onchange="updateCheckboxes(2)">
            <label for="checkbox2">非公開</label>
          </div>
            <script>
              // チェックボックスの連動を制御する関数
              function updateCheckboxes(checkboxNumber) {
              var checkbox1 = document.getElementById("checkbox1");
              var checkbox2 = document.getElementById("checkbox2");
  
              if (checkboxNumber === 1) {
              if (checkbox1.checked) {
                checkbox2.checked = false; // チェックボックス1にチェックがある場合、チェックボックス2を外す
              }
              } else if (checkboxNumber === 2) {
              if (checkbox2.checked) {
                checkbox1.checked = false; // チェックボックス2にチェックがある場合、チェックボックス1を外す
              }
              }
              }
            </script>
            <div id="text-container" style="display:none;">
              公開アカウント設定<br>
              公開パスワード
              <div id="form-container">
                  <form>
                    <input type="text" name="textbox" placeholder="パスワードを入力">
                  </form>
              </div>
            </div>
            <script>
              // チェックボックスの状態に応じてテキストを表示/非表示にする関数
              function updateCheckboxes(checkboxNumber) {
              var textContainer = document.getElementById("text-container");
              var checkBox = document.getElementById("checkbox1");
  
              if (checkBox.checked) {
                  textContainer.style.display = "block"; // チェックが入っている場合は表示する
              } else {
                  textContainer.style.display = "none"; // チェックが外れている場合は非表示にする              
              }
              }
            </script>
        </p>

        <p>QRコード作成</p>
        <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.2/qrcode.min.js"></script>
        <div id="qrcode"></div>

        <script src="QR.js"></script>
        <link rel="stylesheet" href="QR.css">

        <!-- CDNの場合 -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.js"></script>
        <div class="qrblock">
          <p class="qrcomment">QRコードで生成したい文字列を入力してください。</p>
          <input id="isbn" type="text" name="isbn" value=""> <button id="getqrInfo" class="btn btn-default">QRコードを生成</button><br>
          <!--<input type="text">-->
        </div>
        <div id="qrOutput">
          <canvas id="qr"></canvas>
          <div><img id="newImg"></div>
        </div>
        <script>
          document.getElementById('getqrInfo').addEventListener('click', () => {
          // 入力された文字列を取得
          var userInput = document.getElementById('isbn').value;
          var query = userInput.split(' ').join('+');
          // QRコードの生成
          (function() {
          var qr = new QRious({
          element: document.getElementById('qr'),
          // 入力した文字列でQRコード生成
          value: query
          });
          qr.background = '#FFF'; //背景色
          qr.backgroundAlpha = 0.8; // 背景の透過率
          qr.foreground = '#6bb6ff'; //QRコード自体の色
          qr.foregroundAlpha = 1.0; //QRコード自体の透過率
          qr.level = 'L'; // QRコードの誤り訂正レベル
          qr.size = 100; // QRコードのサイズ
          // QRコードをflexboxで表示
          document.getElementById('qrOutput').style.display = 'flex';
          })();
          // png出力用コード
          //var cvs = document.getElementById("qr");
          var png = cvs.toDataURL();
          document.getElementById("newImg").src = png;

          });
        </script>
        <button class="finish">完了</button>
    </div>
    
    <div id="content">
        <!-- メニュー表示・非表示用のボタン -->
        <button id="menu-button">←</button>
    </div>

    <script src="menu.js"> </script>
</body>
</html>